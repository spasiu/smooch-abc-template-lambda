# Smooch ABC preconfigured templates

Use specific phrases sent by agents to users to trigger preconfigured Apple Business Chat messages.

## Environment variables

In _serverless.yml_ include the following environment variables under _provider: > environment:_

```
SMOOCH_APP_KEY_ID: <your_smooch_app_key_id>
SMOOCH_APP_KEY_SECRET: <your_smooch_app_key_secret>
APPLE_BASE_URL: https://<your_abc_subdomain>.push.apple.com/v1
APPLE_API_SECRET: <your_abc_api_secret>
APPLE_BUSINESS_ID: <your_abc_business_id>
APPLE_CSP_ID: <your_abc_csp_id>
```

## Run
1. Set your environment variables
2. Run `serverless deploy`
3. Create "message:appMaker" and "passthrough:apple:interactive" Smooch webhooks pointed at the endpoint generated by serverless once deployed (e.g. _https://somestring.execute-api.us-east-1.amazonaws.com/dev/event_).

## Configuration

Place complete Business Chat interactiveData JSON payloads in _templates_ (see the pre-made examples for guidance, or refer to the Business Chat [documentation](https://developer.apple.com/library/content/documentation/General/Conceptual/MessagesIntegration/SendingLargeInteractiveDataPayloads.html#//apple_ref/doc/uid/TP40017634-CH25-SW1)).
